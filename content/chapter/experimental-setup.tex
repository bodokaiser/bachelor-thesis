\chapter{Experimental setup}\label{ch:experimental_setup}

The exerimental setup was largely adopted from Ref.~\cite{Hertlein2017} and we
will only give a brief summary including a short characterization. Amendments
we made include the \gls{rf} signal source of the \gls{aod}.

\section{Optics}

We start by describing the optical aspects of our setup. The main component
of this work is the \gls{aod}. We will describe some of its properties below
and then head on to the optical setup.

\subsection{Acousto-optic deflectors}

Under the assumption of a light polarized perpendicular or parallel to the
elastic waves under normal incident angle Ref.~\cite{Royer1999} reports that
the acousto-optic acts as a diffraction grating with
\begin{equation}
  \sin\theta_n=\pm n\frac{\lambda}{\Lambda}
  \label{eq:angle_gratting},
\end{equation}
where $\theta_n$ denotes the angle of the $n$th diffraction order, $\lambda$
the laser wavelength and $\Lambda$ the wavelength of the elastic wave inside
the acousto-optic crystal.

Ref.~\cite{Hertlein2017}
discloses a linear model for the spatial resolution in the atomic plane in
terms of the \gls{aod} frequencies
\begin{align}
  x(f_h)/\si{\micro\meter}=3.66\frac{f_h}{\SI{1}{\mega\hertz}}-379 &&
  y(f_v)/\si{\micro\meter}=3.62\frac{f_v}{\SI{1}{\mega\hertz}}-360
  \label{eq:spatial_position_frequency},
\end{align}
wherein $f_h,f_v$ denote the frequencies applied to the \gls{h} respective
\gls{v} \gls{aod}.

\subsection{Setup}

The optical setup can be disected into two parts: a closed first section that
reduces the power of the $\SI{532}{\nano\meter}$ laser source from
$\SI{10}{\watt}$ to below $\SI{2}{\milli\watt}$, it also includes an \gls{aom}
for intensity regulation. The second section is the actual setup where a
\gls{2d} \gls{aod} is used to manipulate the angle of the laser beam in order
to dynamically control the position of the tightly-focused laser beam in the
imaging plane. Both sections are connected through a \gls{smf}.

\subsubsection{First section: power reduction}\label{subsec:setup_power_reduction}

Because of safety concerns the power reduction section is confined into a
visually sealed box housing. \Cref{fig:setup_power_reduction} reveals the
inside of the power reduction setup.
\begin{figure}[htb]
  \centering
  \includegraphics[width=\textwidth]{../figure/setup/power-reduction.pdf}
  \caption{Optical configuration of the power reduction section.
  }\label{fig:setup_power_reduction}
\end{figure}
The laser beam leaving the laser source is linearly polarized. In order to
divert the majority of the power into a beam dump we use a $\lambda/2$
retarder plate and a high-power polarizing beam splitter. Afterwards Mirror
\num{1} and Mirror \num{2} direct the beam towards the center of a $2:1$
telescope composed of Lens \num{1} and Lens \num{2}. The telescope is there to
reduce the beam diameter by \num{2} in order to avoid cut-off at the aperture
of the subsequent \gls{aom}. The \gls{aom} diffracts the laser beam into
multiple orders as it acts as a tunable diffraction grating. Mirror \num{3}
and Mirror \num{4} direct these orders onto a pinhole which is configured to
intromit only the first order deflection. The power in the first diffraction
order can be controlled by changing the \gls{rf} power sent to the \gls{aom}.
Finally a $\lambda/2$ retarder plate is used together with Mirror \num{3} and
Mirror \num{4} to couple the beam into the polarization-maintaining \gls{smf}.

\subsubsection{Beam deflection and detection}\label{subsec:setup_deflection_detection}

The section for beam deflection and detection as disclosed in
\Cref{fig:setup_beam_deflection} receives the down-powered laser beam from
the previously described section by a \gls{smf}. Hereinafter the beam passes
a rotatable retarder plate and beam splitter Cube \num{1} to clean the
polarization of the laser beam after passing through the \gls{smf}. A second
polarizer with Cube \num{2} is used to branch off a part of the beam to
Photodiode \num{1} that is positioned to be at the focal point of Lens
\num{1}. Photodiode \num{1} is connected via a feedback loop with the
amplitude modulation of the \gls{aom} depicted in
\Cref{fig:setup_power_reduction} to stabilize the laser intensity against, for
instance, thermal drifts.
\begin{figure}[htb]
  \centering
  \includegraphics[width=\textwidth]{../figure/setup/beam-deflection.pdf}
  \caption{Optical configuration of the beam deflection section.
  }\label{fig:setup_beam_deflection}
\end{figure}
For horizontal and vertical beam deflection two \gls{aod}s are used. A $1:1$
telescope comprised of two lenses (Lens \num{2} and Lens \num{3}) is used to
image the beam on a pair of objectives. The purpose of the first objective is
to translate a change in the incident angle to a position offset in the atom
plane. The components described so far are sufficient to offset a
high-resolution pertubation laser perpendicular to the atomic plane. The
purpose of the other components is to unfocus the laser back for detection.
Combining the the focal length of the (second) objective $f_\text{obj}$ with
the focal length of $f_4$ we achieve a magnification of
\begin{equation}
  M
  =\frac{f_4}{f_\text{obj}}
  =\frac{\SI{500}{\milli\meter}}{\SI{4.5}{\milli\meter}}
  \approx 111
  \label{eq:setup_magnification}.
\end{equation}
The so colliminated and magnified laser beam is then imaged onto the \gls{ccd}
camera sensor. Cube \num{3} forks a portion of the beam away from the
\gls{ccd} camera on Mirror \num{5} that guides the beam towards Lens
\num{5} in order to focus the beam onto Photodiode \num{2}. It is important
that the sensor of Photodiode \num{2} is positioned on the focal spot of
Lens \num{5}, otherwise the laser beam would leave the sensor when deflected
by the \gls{aod}.

\section{Electronics}

Beforehand we described the optical setups used. Now we want to emphasize
on the electronics and how they are integrated into the optical setup.

In \Cref{fig:setup_elop_aom} the electronic setup of the \gls{aom} control
loop is presented. The \gls{dds} signal source outputs a \SI{80}{\mega\hertz}
\gls{rf} signal which is amplified and then supplied to the \gls{aom} for
intensity modulation, see \Cref{fig:setup_power_reduction}. Photodiode \num{1}
measures the modulated laser intensity and is connected to a \gls{pid}. The
\gls{pid} outputs a signal proportional to the deviation of the measured
intensity from the configured intensity which is provided to the amplitude
modulation input of the power amplifier.
\begin{figure}[htbp]
  \centering
  \begin{subfigure}[b]{0.4\textwidth}
    \includegraphics[width=\textwidth]{../figure/setup/aom-control.pdf}
    \caption{Intensity control via \gls{aom}.
    }\label{fig:setup_elop_aom}
  \end{subfigure}
  \begin{subfigure}[b]{0.4\textwidth}
    \includegraphics[width=\textwidth]{../figure/setup/aod-control.pdf}
    \caption{Deflection control via \gls{aod}.
    }\label{fig:setup_elop_aod}
  \end{subfigure}
  \caption{Electronic setup used to control the electro-optic devices.
  }\label{fig:setup_elop}
\end{figure}
In \Cref{fig:setup_elop_aod} the electronic setup connecting the \gls{2d}
\gls{aod} with the \gls{dds} signal sources are presented. The \gls{dds}
output is configured through a network interface as we will explain later.
Furthermore there is a reference signal source (not shown) that provides a
\SI{10}{\mega\hertz} reference signal to the \gls{dds}. First we will
elaborate on the general components used in \Cref{fig:setup_elop} as well as
our experiments.

\subsection{Signal source}\label{subsec:setup_signal_source}

We require the signal source to generate a sinusoidal \gls{rf} signal
\begin{equation}
  x(t)
  =A\cos\left(2\pi ft\right)
  \label{eq:signal},
\end{equation}
where $0\leq A\leq1$ denotes the amplitude and $f$ the frequency. For the
\gls{aom} setup in \Cref{fig:setup_elop_aom} it is sufficient to configure
a constant frequency $f=\SI{80}{\mega\hertz}$ and amplitude $A=1$, which is
further varied by the feedback loop. For the \gls{aod} control, however,
our requirements are beyond a constant signal. Ideally we would like to
program a time-dependent amplitude $A(t)$ and frequency $f(t)$, supplementary
to the support of an external trigger signal in order to syncronize multiple
signal sources. For our setup we chose to use \gls{dds} as signal sources as
they provide high frequency resolution, a wide range of modulation options and
are cheap compared to signal generators. In \cref{ch:digital_signal_synthesis}
we will give a more detailed view of the characteristics and limitations of
the \gls{ad9910}, the \gls{dds} \gls{ic} we use as signal source.

\subsection{Power amplifier}

We use three signal amplifiers with respective input from the signal sources
to have an output power of about $P=\SI{2}{\watt}$ required by the \gls{aod}s
and the \gls{aom} for maximum diffraction efficiency. The used amplifiers
offer a second input for external amplitude modulation. In case of the
\gls{aom} we connect this input to the output of the feedback loop.

\subsection{PID controller}

A feedback loop takes a reference $r(t)$, also called setpoint, and a process
variable $y(t)$ as input and outputs the value for a control variable $u(t)$,
which in turn, affects the process that determines $y(t)$. A \gls{pid} is
a specific implementation of such a feedback loop that uses a proportional,
differential and integrative term to estimate the control variable $u(t)$.
\begin{figure}[htb]
  \centering
  \includegraphics[width=\textwidth]{../figure/setup/pid-controller.pdf}
  \caption{Block diagram of a \gls{pid} feedback loop.
  }\label{fig:setup_pid}
\end{figure}
In \Cref{fig:setup_pid} we see a block diagram of a \gls{pid}. The error
values is supplied to the proportional block as well as the differentiator
and integrator which in sum give the updated control variable value $u(t)$.
The process changes with $u(t)$ and we read off the process variable $y(t)$
we want to regulate and feed it back to the start of the loop. The control
variable of the \gls{pid} can be expressed through
\begin{equation}
  u(t)
  =
  K_p e(t)+
  K_i \int_0^t \dd{t^\prime} e(t^\prime)+
  K_d \dv{t}{e(t)}
  \label{eq:setup_pid},
\end{equation}
where $K_p,K_i,K_d$ denote the coefficients of the respective terms. The ideal
values for the coefficients have to be found by loop tuning for each
application. Every term contributing to \cref{eq:setup_pid} can be thought
of to account for a different time scale of the process: the proportional term
considers the momentary error, the differential predicts trends and the
integrator corrects for past errors. For our particular application the
control variable is the amplitude $A(t)$ supplied to the modulation input
of the power amplifier of the \gls{aom} \gls{rf} signal. The process variable
of our \gls{pid} is the voltage measured at Photodiode \num{1}.

\subsection{Trigger source}

To syncronize the signal sources, the \gls{ccd} camera and the oscilloscope
it was necessary to design a network programable trigger source that outputs
a square pulse and forwards it to multiple devices. The schematics, board
layout and source code can be found in the \Cref{app:electronics:trigger_hub}.

\section{Communication}

In the last section of this chapter we will see that the diffraction
efficiency of the \gls{aod}s is not constant and requires readjustment by
amplitude modulation of the \gls{rf} signal supplied to the \gls{aod}s. We
consider this readjustment step as a calibration process. The efficienct
implementation of such a calibration process requires an orchestrated
interplay of different electronic devices which we will discuss now.
\begin{figure}[htb]
  \centering
  \includegraphics[width=\textwidth]{../figure/setup/network.pdf}
  \caption{Communication setup of the electronic devices in the experimental
    setup.
  }\label{fig:setup_network}
\end{figure}
In \Cref{fig:setup_network} the communication setup of our electronic devices
is illustrated. The computer, the trigger host, the oscilloscope and the
\gls{dds} host are connected to the \gls{lan}. The trigger host and the
\gls{dds} host are both \gls{bbb} that run a \gls{http} server from which the
computer can change parameters over the network. The implementation of the
\gls{http} server of the trigger host as well as the schematics of the trigger
hub can be found in \Cref{app:electronics:trigger_hub}. The \gls{http} service
that runs on the \gls{dds} host also contains a driver which writes the
\gls{dds} parameters over \gls{spi} to the respective \gls{dds} board. The
oscilloscope can be controlled through \gls{visa}.
\begin{listing}[htb]
  \inputminted[linenos,xleftmargin=.2\linewidth]{python}
  {../media/source/example.py}
  \caption{Example usage of the Python module to control the setup.
  }\label{lis:control_example}
\end{listing}
In \Cref{lis:control_example} we can see an examplary measurement using a
Python module we wrote to abstract away the interaction with the setup.

\section{Trial run}

After we integrated the \gls{dds} into the experimental setup, we wanted to
test its capabilities. Therefore we wrote a simple script that transforms
short letter sequences to a list of frequency pairs that we can playback
from the \gls{h} and \gls{v} \gls{dds}.
\begin{figure}[htb]
  \centering
  \begin{adjustbox}{width=\textwidth}
    \inputpgf{../figure/intensity/projection/}{bodo.pgf}
  \end{adjustbox}
  \caption{Text projection as captured by the \gls{ccd} camera.
  }\label{fig:setup_projection}
\end{figure}
In \Cref{fig:setup_projection} we see the projected text as captured by the
camera. The text projection is created by iterating through a set of frequency
pairs, which as we know, correspond to a position offset. For a sufficient
exposure of the \gls{ccd} camera we can capture a time average over all
single points just as we plan to do with the optical potentials. Even though
we configured the \gls{dds} with constant amplitude, we notice that the
illumination is not homogenous. In fact we will see that the diffraction
efficiency of the \gls{aod} depends heavy on the frequency and it will
turn out to be a challenging endeavour trying to compensate for this
dependency as we will see in the final part of this thesis.
